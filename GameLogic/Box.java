package GameLogic;

//
//
//  Generated by StarUML(tm) Java Add-In
//
//  @ Project : 6projlab
//  @ File Name : Box.java
//  @ Date : 2018.03.17.
//  @ Author : Gyöngyösi Péter
//
//




public class Box extends Thing implements Moveable{
	
	
	public void Destroy() {
		GetField().Remove();
		GetField().GetWarehouse().RemoveBox(this);
	}
	
	public boolean Move(Direction dir) {
		if(GetField().GetNeighbor(dir).HitBy(dir, this)) {
			GetField().Remove();
			GetField().GetNeighbor(dir).Add(this);
			return true;
		}
		return false;
	}
	
	public boolean HitBy(Direction dir, Box b) {
		if(isStucked()) {
			b.CheckStucked(dir);
			return false;
		}
		else {
			return Move(dir);
		}
	}
	
	public boolean HitBy(Direction dir, Worker w) {
		if(isStucked())
			return false;
		else
			return Move(dir);
	}
	
	public void CheckStucked(Direction dir) {
		if(dir == Direction.Left || dir == Direction.Right)
			if(GetField().GetNeighbor(Direction.Up).GetThing().isStucked() || GetField().GetNeighbor(Direction.Down).GetThing().isStucked())
				this.SetStucked(true);
			
		if(dir == Direction.Up || dir == Direction.Down)
			if(GetField().GetNeighbor(Direction.Left).GetThing().isStucked() || GetField().GetNeighbor(Direction.Right).GetThing().isStucked())
				this.SetStucked(true);
	}
	
}
